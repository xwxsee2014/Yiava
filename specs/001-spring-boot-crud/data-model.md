# Data Model Design: Content Entity

**Date**: 2025-11-21
**Feature**: Spring Boot CRUD Init
**Version**: 1.0

## Entities

### Content Entity

**Purpose**: Represents a content record stored in the database

**Fields**:
- `id` (Long, Primary Key, Auto-increment)
  - Unique identifier for each content record
  - Generated by database auto-increment mechanism
  - Cannot be null
  - Range: 1 to 9,223,372,036,854,775,807

- `content` (String, VARCHAR)
  - The text content stored by the user
  - Cannot be null or empty
  - Maximum length: 5000 characters (configurable)
  - Supports Unicode characters

**Constraints**:
- Primary key: `id`
- Not null constraint: `content`
- Unique constraint: Not required (multiple records can have same content)

**Database Table Schema** (Flyway migration):

```sql
CREATE TABLE content (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    content VARCHAR(5000) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

**Relationships**:
- No foreign key relationships (standalone entity)
- Can be extended with audit fields (created_by, updated_by, version) if needed

**Validation Rules**:
- Content must not be null
- Content must not be empty (whitespace-only considered empty)
- Content length must not exceed 5000 characters

## DTOs (Data Transfer Objects)

### ContentRequest DTO

**Purpose**: Used for creating and updating content records

**Fields**:
- `content` (String)
  - The content text to be stored
  - Validation: Not null, not empty, max 5000 characters

**Validation Annotations**:
```java
@NotBlank(message = "Content cannot be blank")
@Size(max = 5000, message = "Content must not exceed 5000 characters")
```

### ContentResponse DTO

**Purpose**: Used for returning content data to API clients

**Fields**:
- `id` (Long)
  - The unique identifier of the content record
- `content` (String)
  - The content text
- `createdAt` (LocalDateTime)
  - Timestamp when the record was created
- `updatedAt` (LocalDateTime)
  - Timestamp when the record was last updated

**Notes**: Created using Java 17 `record` pattern for immutability

## Entity Lifecycle

### Create Operation
1. Client sends ContentRequest with content
2. Validate content (not null, not empty, length check)
3. Insert into database with auto-generated ID
4. Return ContentResponse with generated ID and timestamps

### Read Operation
1. Query database for records
2. Map database rows to ContentResponse DTOs
3. Return list or single record

### Update Operation
1. Validate ID exists
2. Validate new content
3. Update database record
4. Return updated ContentResponse

### Delete Operation
1. Validate ID exists
2. Delete from database
3. Return success confirmation

## Extensibility

**Future Enhancements**:
- Add `category` field for content classification
- Add `tags` field for flexible tagging
- Add `status` field (active/inactive/draft)
- Add `version` field for optimistic locking
- Add `createdBy` and `updatedBy` fields for audit trail
- Add soft delete capability (deleted_at timestamp)

**Design Decisions**:
- Kept minimal initial design per YAGNI principle
- Can extend with additional fields without breaking existing API (versioned endpoints)
- Audit fields (created_at, updated_at) provide basic tracking without complexity
